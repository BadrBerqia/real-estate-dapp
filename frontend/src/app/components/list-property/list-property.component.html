<div class="list-property">
  <div class="header">
    <h2>Lister une Nouvelle Propri√©t√©</h2>
    <button class="btn btn-secondary" (click)="goBack()">‚Üê Retour</button>
  </div>

  <form (ngSubmit)="onSubmit()" class="property-form">
    <div class="form-group">
      <label for="title">Titre *</label>
      <input type="text" id="title" [(ngModel)]="propertyData.title" 
             name="title" required>
    </div>

    <div class="form-group">
      <label for="description">Description</label>
      <textarea id="description" [(ngModel)]="propertyData.description" 
                name="description" rows="4"></textarea>
    </div>

    <div class="form-group">
      <label for="location">Localisation *</label>
      <input type="text" id="location" [(ngModel)]="propertyData.location" 
             name="location" required>
    </div>

    <!-- Section IA - Estimation de prix -->
    <div class="ai-section">
      <div class="ai-header">
        <h3>ü§ñ Estimation IA du prix</h3>
        <p>Renseignez les caract√©ristiques pour obtenir une estimation</p>
      </div>

      <div class="ai-inputs">
        <div class="form-row">
          <div class="form-group">
            <label for="surface">Surface (m¬≤)</label>
            <input type="number" id="surface" [(ngModel)]="aiData.surface" 
                   name="surface" min="10" max="500">
          </div>
          <div class="form-group">
            <label for="rooms">Nombre de pi√®ces</label>
            <input type="number" id="rooms" [(ngModel)]="aiData.rooms" 
                   name="rooms" min="1" max="20">
          </div>
        </div>

        <div class="form-row">
          <div class="form-group">
            <label for="location_score">Score localisation (1-10)</label>
            <input type="number" id="location_score" [(ngModel)]="aiData.location_score" 
                   name="location_score" min="1" max="10" step="0.1">
          </div>
          <div class="form-group">
            <label for="distance_center">Distance centre-ville (km)</label>
            <input type="number" id="distance_center" [(ngModel)]="aiData.distance_center" 
                   name="distance_center" min="0" max="50" step="0.5">
          </div>
        </div>

        <div class="form-row">
          <div class="form-group">
            <label for="season_index">Indice saisonnier</label>
            <select id="season_index" [(ngModel)]="aiData.season_index" name="season_index">
              <option [value]="0.8">Basse saison (0.8)</option>
              <option [value]="1.0">Moyenne saison (1.0)</option>
              <option [value]="1.2">Haute saison (1.2)</option>
            </select>
          </div>
          <div class="form-group ai-button-group">
            <button type="button" class="btn btn-ai" (click)="predictPrice()" 
                    [disabled]="loadingPrediction">
              {{ loadingPrediction ? '‚è≥ Calcul...' : 'üîÆ Estimer le prix' }}
            </button>
          </div>
        </div>
      </div>

      <!-- R√©sultat de la pr√©diction -->
      <div class="ai-result" *ngIf="suggestedPrice !== null">
        <div class="suggested-price">
          <span class="price-label">Prix sugg√©r√© :</span>
          <span class="price-value">{{ suggestedPrice }} ‚Ç¨/mois</span>
          <span class="price-eth">‚âà {{ (suggestedPrice / 3000).toFixed(4) }} ETH/jour</span>
        </div>
        <button type="button" class="btn btn-success" (click)="applySuggestedPrice()">
          ‚úì Appliquer ce prix
        </button>
      </div>
    </div>

    <div class="form-row">
      <div class="form-group">
        <label for="pricePerDay">Prix par jour (ETH) *</label>
        <input type="number" id="pricePerDay" [(ngModel)]="propertyData.pricePerDay" 
               name="pricePerDay" required min="0.001" step="0.001">
      </div>
      <div class="form-group">
        <label for="deposit">D√©p√¥t de garantie (ETH)</label>
        <input type="number" id="deposit" [(ngModel)]="propertyData.deposit" 
               name="deposit" min="0" step="0.001">
      </div>
    </div>

    <div class="form-actions">
      <button type="button" class="btn btn-secondary" (click)="goBack()">
        Annuler
      </button>
      <button type="submit" class="btn btn-primary" 
              [disabled]="processing">
        {{ processing ? 'Traitement...' : 'Lister la Propri√©t√©' }}
      </button>
    </div>
  </form>
</div>