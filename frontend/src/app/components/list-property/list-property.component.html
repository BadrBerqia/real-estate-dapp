<div class="list-property">
  <div class="header">
    <h2>Lister une Nouvelle Propri√©t√©</h2>
    <button class="btn btn-secondary" (click)="goBack()">‚Üê Retour</button>
  </div>

  <form (ngSubmit)="onSubmit()" class="property-form">
    <div class="form-group">
      <label for="title">Titre *</label>
      <input type="text" id="title" [(ngModel)]="propertyData.title" 
             name="title" required>
    </div>

    <div class="form-group">
      <label for="description">Description</label>
      <textarea id="description" [(ngModel)]="propertyData.description" 
                name="description" rows="4"></textarea>
    </div>

    <div class="form-group">
      <label for="location">Localisation *</label>
      <input type="text" id="location" [(ngModel)]="propertyData.location" 
             name="location" required>
    </div>

    <!-- Section IA - Estimation de prix -->
    <div class="ai-section">
      <div class="ai-header">
        <h3>ü§ñ Estimation IA du prix</h3>
        <p>Renseignez les caract√©ristiques pour obtenir une estimation</p>
      </div>

      <div class="ai-inputs">
        <div class="form-row">
          <div class="form-group">
            <label for="surface">
              Surface (m¬≤)
              <span class="info-tooltip">
                ‚ÑπÔ∏è
                <span class="tooltip-text">
                  Surface habitable totale de la propri√©t√© en m√®tres carr√©s.
                </span>
              </span>
            </label>
            <input type="number" id="surface" [(ngModel)]="aiData.surface" 
                   name="surface" min="10" max="500">
          </div>
          <div class="form-group">
            <label for="rooms">
              Nombre de pi√®ces
              <span class="info-tooltip">
                ‚ÑπÔ∏è
                <span class="tooltip-text">
                  Nombre total de pi√®ces principales (chambres, salon, bureau).
                </span>
              </span>
            </label>
            <input type="number" id="rooms" [(ngModel)]="aiData.rooms" 
                   name="rooms" min="1" max="20">
          </div>
        </div>

        <div class="form-row">
          <div class="form-group">
            <label for="location_score">
              Score localisation (1-10)
              <span class="info-tooltip">
                ‚ÑπÔ∏è
                <span class="tooltip-text">
                  1-3: Zone isol√©e, peu de transports<br>
                  4-5: Quartier basique, quelques commerces<br>
                  6-7: Bon quartier, transports accessibles<br>
                  8-9: Quartier pris√©, bien desservi<br>
                  10: Emplacement premium (vue mer, centre historique)
                </span>
              </span>
            </label>
            <input type="number" id="location_score" [(ngModel)]="aiData.location_score" 
                   name="location_score" min="1" max="10" step="0.1">
          </div>
          <div class="form-group">
            <label for="distance_center">
              Distance centre-ville (km)
              <span class="info-tooltip">
                ‚ÑπÔ∏è
                <span class="tooltip-text">
                  Distance approximative entre la propri√©t√© et le centre-ville en kilom√®tres.
                </span>
              </span>
            </label>
            <input type="number" id="distance_center" [(ngModel)]="aiData.distance_center" 
                   name="distance_center" min="0" max="50" step="0.5">
          </div>
        </div>

        <div class="form-row">
          <div class="form-group">
            <label for="season_index">
              Indice saisonnier
              <span class="info-tooltip">
                ‚ÑπÔ∏è
                <span class="tooltip-text">
                  Basse saison: p√©riodes creuses (hiver)<br>
                  Moyenne saison: p√©riodes normales<br>
                  Haute saison: vacances, √©t√©, f√™tes
                </span>
              </span>
            </label>
            <select id="season_index" [(ngModel)]="aiData.season_index" name="season_index">
              <option [value]="0.8">Basse saison (0.8)</option>
              <option [value]="1.0">Moyenne saison (1.0)</option>
              <option [value]="1.2">Haute saison (1.2)</option>
            </select>
          </div>
          <div class="form-group ai-button-group">
            <button type="button" class="btn btn-ai" (click)="predictPrice()" 
                    [disabled]="loadingPrediction">
              {{ loadingPrediction ? '‚è≥ Calcul...' : 'üîÆ Estimer le prix' }}
            </button>
          </div>
        </div>
      </div>

      <!-- R√©sultat de la pr√©diction -->
      <div class="ai-result" *ngIf="suggestedPrice !== null">
        <div class="suggested-price">
          <span class="price-label">Prix sugg√©r√© :</span>
          <span class="price-value">{{ (suggestedPrice / 30).toFixed(2) }} ‚Ç¨/nuit</span>
          <span class="price-eth">‚âà {{ (suggestedPrice / 30 / 3400).toFixed(4) }} ETH/nuit</span>
        </div>
        <button type="button" class="btn btn-success" (click)="applySuggestedPrice()">
          ‚úì Appliquer ce prix
        </button>
      </div>
    </div>

    <div class="form-row">
      <div class="form-group">
        <label for="pricePerDay">Prix par jour (ETH) *</label>
        <input type="number" id="pricePerDay" [(ngModel)]="propertyData.pricePerDay" 
               name="pricePerDay" required min="0.001" step="0.001">
      </div>
      <div class="form-group">
        <label for="deposit">D√©p√¥t de garantie (ETH)</label>
        <input type="number" id="deposit" [(ngModel)]="propertyData.deposit" 
               name="deposit" min="0" step="0.001">
      </div>
    </div>

    <div class="form-actions">
      <button type="button" class="btn btn-secondary" (click)="goBack()">
        Annuler
      </button>
      <button type="submit" class="btn btn-primary" 
              [disabled]="processing">
        {{ processing ? 'Traitement...' : 'Lister la Propri√©t√©' }}
      </button>
    </div>
  </form>
</div>