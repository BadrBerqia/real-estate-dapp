<div class="my-properties">
  <!-- En-t√™te avec statistiques -->
  <div class="header-section">
    <div class="header-content">
      <div class="title-group">
        <h1>üè† Mes Propri√©t√©s</h1>
        <p class="subtitle">G√©rez toutes vos propri√©t√©s en location</p>
      </div>
      <button class="btn btn-primary" (click)="router.navigate(['/list-property'])">
        <span class="btn-icon">+</span>
        Lister une Nouvelle Propri√©t√©
      </button>
    </div>

    <!-- Cartes de statistiques -->
    <div class="stats-container">
      <div class="stat-card">
        <div class="stat-icon">üìä</div>
        <div class="stat-content">
          <span class="stat-number">{{ properties.length }}</span>
          <span class="stat-label">Propri√©t√©(s)</span>
        </div>
      </div>
      <div class="stat-card">
        <div class="stat-icon">‚úÖ</div>
        <div class="stat-content">
          <span class="stat-number">{{ getAvailablePropertiesCount() }}</span>
          <span class="stat-label">Disponible(s)</span>
        </div>
      </div>
      <div class="stat-card">
        <div class="stat-icon">‚è≥</div>
        <div class="stat-content">
          <span class="stat-number">{{ getOccupiedPropertiesCount() }}</span>
          <span class="stat-label">Occup√©e(s)</span>
        </div>
      </div>
    </div>
  </div>

  <!-- √âtat de chargement -->
  <div *ngIf="loading" class="loading-state">
    <div class="loading-spinner"></div>
    <p>Chargement de vos propri√©t√©s...</p>
  </div>

  <!-- √âtat vide -->
  <div *ngIf="properties.length === 0 && !loading" class="empty-state">
    <div class="empty-content">
      <div class="empty-icon">üè°</div>
      <h3>Aucune propri√©t√© trouv√©e</h3>
      <p>Vous n'avez pas encore list√© de propri√©t√©s sur la plateforme.</p>
      <button class="btn btn-primary" (click)="router.navigate(['/list-property'])">
        üöÄ Lister votre premi√®re propri√©t√©
      </button>
    </div>
  </div>

  <!-- Grille des propri√©t√©s -->
  <div *ngIf="properties.length > 0 && !loading" class="properties-container">
    <!-- Barre d'outils -->
    <div class="toolbar">
      <div class="search-box">
        <input type="text" placeholder="üîç Rechercher une propri√©t√©..." 
               (input)="onSearch($event)">
      </div>
      <div class="filter-controls">
        <select (change)="onStatusFilter($event)" class="filter-select">
          <option value="all">Tous les statuts</option>
          <option value="available">Disponibles</option>
          <option value="occupied">Occup√©es</option>
        </select>
      </div>
    </div>

    <!-- Grille des propri√©t√©s -->
    <div class="properties-grid">
      <div *ngFor="let property of filteredProperties" 
           class="property-card" 
           [class.featured]="property.isAvailable">
        
        <!-- Image et badge de statut -->
        <div class="property-image">
          <img [src]="getPropertyImage(property.id)" [alt]="property.title" 
               (error)="handleImageError($event)">
          <div class="image-overlay">
            <div class="status-badge" [class]="getStatusClass(property)">
              {{ property.isAvailable ? '‚úÖ Disponible' : '‚è≥ Occup√©e' }}
            </div>
            <div class="action-buttons">
              <button class="btn-icon" (click)="viewProperty(property.id)" title="Voir d√©tails">
                üëÅÔ∏è
              </button>
            </div>
          </div>
        </div>

        <!-- Informations de la propri√©t√© -->
        <div class="property-content">
          <div class="property-header">
            <h3 class="property-title">{{ property.title }}</h3>
            <div class="property-id">#{{ property.id }}</div>
          </div>
          
          <p class="property-location">üìç {{ property.location }}</p>
          <p class="property-description" *ngIf="property.description">
            {{ truncateDescription(property.description) }}
          </p>

          <!-- D√©tails financiers -->
          <div class="financial-details">
            <div class="price-section">
              <div class="price-item">
                <span class="price-label">Prix/jour</span>
                <span class="price-value">{{ property.pricePerDay }} ETH</span>
              </div>
              <div class="price-item">
                <span class="price-label">D√©p√¥t</span>
                <span class="price-value">{{ property.deposit }} ETH</span>
              </div>
            </div>
            <div class="total-price">
              <span class="total-label">Total par location</span>
              <span class="total-value">{{ property.pricePerDay + property.deposit }} ETH</span>
            </div>
          </div>

          <!-- M√©triques -->
          <div class="property-metrics">
            <div class="metric">
              <span class="metric-icon">üìÖ</span>
              <span class="metric-text">{{ property.rentalIds?.length || 0 }} location(s)</span>
            </div>
          </div>

          <!-- Actions -->
          <div class="property-actions">
            <button class="btn btn-outline" (click)="viewProperty(property.id)">
              üëÄ Voir D√©tails
            </button>
            <button *ngIf="property.isAvailable" 
                    class="btn btn-secondary"
                    (click)="editProperty(property.id)">
              ‚úèÔ∏è Modifier
            </button>
          </div>
        </div>
      </div>
    </div>

    <!-- Pagination -->
    <div class="pagination" *ngIf="properties.length > 6">
      <button class="pagination-btn" [disabled]="currentPage === 1" 
              (click)="previousPage()">‚Üê Pr√©c√©dent</button>
      <span class="pagination-info">Page {{ currentPage }} sur {{ totalPages }}</span>
      <button class="pagination-btn" [disabled]="currentPage === totalPages" 
              (click)="nextPage()">Suivant ‚Üí</button>
    </div>
  </div>
</div>